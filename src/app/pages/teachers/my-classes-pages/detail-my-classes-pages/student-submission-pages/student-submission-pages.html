<ng-container>
  @if(device.isDesktop()) {
  <div class="mb-6 flex flex-row justify-between items-center">
    <h1 class="text-4xl text-center font-bold text-gray-800">Student Submissions</h1>
    <div class="flex flex-row gap-2">
      <button type="button" class="btn-primary" (click)="openSheetSubmission = true">
        View All Submission
      </button>
      <button type="button" class="btn-danger" (click)="toBack()">Back To Student Profile</button>
    </div>
  </div>

  <div class="w-full bg-white mb-4 rounded-2xl p-4 flex flex-row justify-between items-center">
    <button class="btn-warning">Previous</button>
    <div class="flex flex-col justify-center items-center">
      <p class="font-bold text-2xl">{{ studentName }}</p>
      <p class="font-bold text-sm text-gray-500">ID:{{ studentDisplayId }}</p>
    </div>
    <button class="btn-primary">Next</button>
  </div>
  @if(isUploadedFile){
  <div class="w-full mb-4">
    <div class="flex flex-col gap-4">
      <div class="w-full bg-white p-6 rounded-3xl flex flex-col gap-4">
        <div class="flex flex-row justify-between items-center">
          <p class="text-2xl font-bold">Student's Uploaded File</p>
          <button type="button" class="btn-warning" (click)="isUploadedFile = !isUploadedFile">
            View Student Transcribed Text
          </button>
        </div>
        <img src="img/default-img.png" class="w-full rounded-2xl object-cover" alt="class image" />
      </div>
    </div>
  </div>
  } @if(!isUploadedFile){
  <div class="w-full mb-4">
    <div class="flex flex-col gap-4">
      <div class="w-full bg-white p-6 rounded-3xl flex flex-col gap-4">
        <div class="flex flex-row justify-between items-center">
          <p class="text-2xl font-bold">Student's Transcribed Text</p>
          <button type="button" class="btn-warning" (click)="isUploadedFile = !isUploadedFile">
            View Student Uploaded File
          </button>
        </div>
        <div class="bg-[#F3F3F3] p-4 rounded-2xl">
          <div class="container mx-auto px-4 max-w-6xl">
            <div class="grid lg:grid-cols-4 gap-4">
              <!-- Sidebar with Statistics -->
              <div class="lg:col-span-1 space-y-4">
                <!-- Score Card -->
                <div class="gradient-card p-6 hover-lift">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold text-gray-700">Overall Score</h3>
                    <span class="text-blue-500 text-xl font-bold">82/100</span>
                  </div>

                  <div class="relative w-32 h-32 mx-auto mb-4">
                    <svg class="progress-ring w-32 h-32" width="120" height="120">
                      <circle
                        class="text-gray-200"
                        stroke-width="10"
                        stroke="currentColor"
                        fill="transparent"
                        r="52"
                        cx="60"
                        cy="60"
                      />
                      <circle
                        class="progress-ring-circle text-blue-500"
                        stroke-width="10"
                        stroke-dasharray="326.56"
                        stroke-dashoffset="58.78"
                        stroke-linecap="round"
                        stroke="currentColor"
                        fill="transparent"
                        r="52"
                        cx="60"
                        cy="60"
                      />
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                      <span class="text-2xl font-bold text-gray-700">B+</span>
                    </div>
                  </div>

                  <div class="text-center text-sm text-gray-600">
                    <p>Strong effort with some areas for refinement</p>
                  </div>
                </div>

                <!-- Correction Stats -->
                <div class="gradient-card p-6 hover-lift">
                  <h3 class="font-semibold text-gray-700 mb-4">Correction Statistics</h3>

                  <div class="space-y-4">
                    <div>
                      <div class="flex justify-between text-sm mb-1">
                        <span class="text-gray-600">Content Issues</span>
                        <span class="font-medium">4</span>
                      </div>
                      <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div class="h-full bg-red-400 rounded-full" style="width: 36%"></div>
                      </div>
                    </div>

                    <div>
                      <div class="flex justify-between text-sm mb-1">
                        <span class="text-gray-600">Grammar Issues</span>
                        <span class="font-medium">3</span>
                      </div>
                      <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div class="h-full bg-green-400 rounded-full" style="width: 27%"></div>
                      </div>
                    </div>

                    <div>
                      <div class="flex justify-between text-sm mb-1">
                        <span class="text-gray-600">Organization Issues</span>
                        <span class="font-medium">2</span>
                      </div>
                      <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div class="h-full bg-blue-400 rounded-full" style="width: 18%"></div>
                      </div>
                    </div>

                    <div>
                      <div class="flex justify-between text-sm mb-1">
                        <span class="text-gray-600">Vocabulary Issues</span>
                        <span class="font-medium">3</span>
                      </div>
                      <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div class="h-full bg-purple-400 rounded-full" style="width: 27%"></div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Correction Legend -->
                <div class="gradient-card p-6 hover-lift">
                  <h3 class="font-semibold text-gray-700 mb-4">Correction Legend</h3>

                  <div class="space-y-3">
                    <div class="flex items-center">
                      <span class="correction-badge bg-red-100 text-red-800">REL</span>
                      <span class="text-sm text-gray-600 ml-2">Relevance</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-red-100 text-red-800">DEV</span>
                      <span class="text-sm text-gray-600 ml-2">Idea Development</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-red-100 text-red-800">TA</span>
                      <span class="text-sm text-gray-600 ml-2">Task Achievement</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-blue-100 text-blue-800">COH</span>
                      <span class="text-sm text-gray-600 ml-2">Coherence</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-blue-100 text-blue-800">TS</span>
                      <span class="text-sm text-gray-600 ml-2">Topic Sentence</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-green-100 text-green-800">T</span>
                      <span class="text-sm text-gray-600 ml-2">Tense</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-green-100 text-green-800">AGR</span>
                      <span class="text-sm text-gray-600 ml-2">Agreement</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-purple-100 text-purple-800">WC</span>
                      <span class="text-sm text-gray-600 ml-2">Word Choice</span>
                    </div>
                    <div class="flex items-center">
                      <span class="correction-badge bg-yellow-100 text-yellow-800">SP</span>
                      <span class="text-sm text-gray-600 ml-2">Spelling</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Main Content Area -->
              <div class="lg:col-span-3 space-y-8">
                <!-- Essay with Corrections -->
                <div class="gradient-card hover-lift fade-in p-4">
                  <div class="flex justify-between items-center mb-6 pb-4 border-b border-gray-200">
                    <div>
                      <h2 class="text-2xl font-bold text-gray-800">
                        The Impact of Digital Technology on Modern Education
                      </h2>
                      <p class="text-gray-500 mt-1">By: Sarah Johnson • May 15, 2023</p>
                    </div>
                    <div class="flex space-x-2">
                      <span
                        class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"
                        >Education</span
                      >
                      <span
                        class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"
                        >Technology</span
                      >
                    </div>
                  </div>

                  <article class="text-gray-700 leading-relaxed text-lg space-y-6">
                    <section class="p-4 rounded-lg bg-white border border-gray-200">
                      @if (writingCorrectionsHtml) {
                      <pre class="text-sm leading-relaxed text-gray-700 whitespace-pre-wrap font-sans" [innerHTML]="writingCorrectionsHtml"></pre>
                      }
                    </section>
                  </article>
                </div>

                <!-- Feedback and Suggestions -->
                <div class="gradient-card hover-lift fade-in p-4">
                  <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-comment-dots text-blue-500 mr-3"></i>
                    Detailed Feedback & Suggestions
                  </h3>

                  <div class="grid md:grid-cols-2 gap-6">
                    <!-- Areas for Improvement -->
                    <div>
                      <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                        <i class="fas fa-tools text-red-500 mr-2"></i>
                        Areas for Improvement
                      </h4>

                      <div class="space-y-4">
                        <div class="suggestion-item border-red-400">
                          <h5 class="font-medium text-gray-800">Relevance and Idea Development</h5>
                          <p class="text-sm text-gray-600 mt-1">
                            Some ideas are not relevant to the main topic. Develop arguments with
                            supporting examples and data.
                          </p>
                        </div>

                        <div class="suggestion-item border-blue-400">
                          <h5 class="font-medium text-gray-800">Structure and Coherence</h5>
                          <p class="text-sm text-gray-600 mt-1">
                            Improve logical flow between paragraphs and ensure each paragraph has a
                            clear topic sentence.
                          </p>
                        </div>

                        <div class="suggestion-item border-green-400">
                          <h5 class="font-medium text-gray-800">Grammar and Spelling</h5>
                          <p class="text-sm text-gray-600 mt-1">
                            Correct basic grammar mistakes and pay attention to spelling of
                            technical terms.
                          </p>
                        </div>
                      </div>
                    </div>

                    <!-- Strengths -->
                    <div>
                      <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                        <i class="fas fa-star text-yellow-500 mr-2"></i>
                        Strengths
                      </h4>

                      <div class="space-y-4">
                        <div class="flex items-start">
                          <i class="fas fa-check text-green-500 mt-1 mr-3"></i>
                          <div>
                            <h5 class="font-medium text-gray-800">Relevant Topic</h5>
                            <p class="text-sm text-gray-600 mt-1">
                              Topic selection is appropriate to modern context and important.
                            </p>
                          </div>
                        </div>

                        <div class="flex items-start">
                          <i class="fas fa-check text-green-500 mt-1 mr-3"></i>
                          <div>
                            <h5 class="font-medium text-gray-800">Basic Structure</h5>
                            <p class="text-sm text-gray-600 mt-1">
                              Essay has clear introduction, body, and conclusion structure.
                            </p>
                          </div>
                        </div>

                        <div class="flex items-start">
                          <i class="fas fa-check text-green-500 mt-1 mr-3"></i>
                          <div>
                            <h5 class="font-medium text-gray-800">Awareness of Issues</h5>
                            <p class="text-sm text-gray-600 mt-1">
                              Shows understanding of technology challenges in education.
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Action Steps -->
                  <div
                    class="mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200"
                  >
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center">
                      <i class="fas fa-road text-blue-500 mr-2"></i>
                      Action Steps for Improvement
                    </h4>
                    <ol class="list-decimal list-inside text-gray-700 space-y-2">
                      <li>Focus on the main topic - technology's impact on education</li>
                      <li>Use specific examples and supporting data to strengthen arguments</li>
                      <li>Improve paragraph structure with clear topic sentences</li>
                      <li>Review grammar usage and spelling carefully</li>
                      <li>Develop a stronger conclusion that summarizes key points</li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <script>
            // Progress ring animation
            document.addEventListener('DOMContentLoaded', function () {
              const circle = document.querySelector('.progress-ring-circle');
              const radius = circle.r.baseVal.value;
              const circumference = radius * 2 * Math.PI;

              circle.style.strokeDasharray = `${circumference} ${circumference}`;
              circle.style.strokeDashoffset = circumference;

              // Set progress based on score (82%)
              const offset = circumference - (82 / 100) * circumference;
              setTimeout(() => {
                circle.style.strokeDashoffset = offset;
              }, 500);

              // Add fade-in animation to elements
              const fadeElements = document.querySelectorAll('.fade-in');
              fadeElements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
              });
            });
          </script>
        </div>
      </div>
    </div>
  </div>
  }

  <div class="flex flex-col gap-4">
    <div class="w-full bg-white p-6 rounded-3xl flex flex-col gap-6">
      <div class="flex flex-row justify-between items-center">
        <p class="text-2xl font-bold">AI Feedback</p>
        <div class="flex flex-row gap-2">
          <button type="button" class="btn-info" (click)="generateAiForCurrentSubmission()">Generate AI Feedback</button>
          <button type="button" class="btn-primary" (click)="downloadPdfForCurrentSubmission()">Download PDF</button>
          <button type="button" class="btn-warning" (click)="onEditRubric()">View / Edit Rubric</button>
        </div>
      </div>
      <div class="">
        <div class="flex flex-col gap-3">
          @for (item of feedbacks; track item) {
          <div class="w-full grid grid-cols-7 items-center py-4 px-6 bg-[#F3F3F3] rounded-xl">
            <div class="col-span-5">
              <div class="flex flex-row gap-2 items-center">
                <p class="text-xl font-bold mb-1">
                  {{ item.category }}
                </p>
                <div class="h-10 w-10 rounded-full bg-[#008081] flex items-center justify-center">
                  <p class="text-sm font-bold text-white">{{ item.score }}/{{ item.maxScore }}</p>
                </div>
              </div>
              <p>
                {{ item.description }}
              </p>
            </div>
          </div>
          }
          <div class="w-full items-center py-4 px-6 bg-[#F3F3F3] rounded-xl" [formGroup]="feedbackForm">
            <p class="text-xl font-bold mb-1">Teacher Comments</p>
            <div class="flex flex-col gap-1">
              <div class="w-full">
                <textarea
                  formControlName="message"
                  class="input-text w-full h-32 resize-none bg-white"
                  placeholder="Type your message..."
                ></textarea>
              </div>
            </div>
            <div class="w-full flex justify-end mt-4">
              <button type="button" class="btn-primary" (click)="submitFeedback()">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  }
</ng-container>

<ng-container>
  @if(device.isMobile() || device.isTablet()) {
  <app-app-bar-back-button
    [title]="classTitle"
    (back)="toBack()"
  ></app-app-bar-back-button>

  <div class="w-full bg-white mb-4 rounded-2xl p-4 flex flex-row justify-between items-center">
    <button class="btn-warning-sm"><i class="bx bx-chevron-left"></i></button>
    <div class="flex flex-col justify-center items-center">
      <p class="font-bold text-base">{{ studentName }}</p>
      <p class="font-bold text-xs text-gray-500">ID:{{ studentDisplayId }}</p>
    </div>
    <button class="btn-primary-sm"><i class="bx bx-chevron-right"></i></button>
  </div>

  <div class="w-full flex flex-col gap-4 mb-24">
    <div class="w-full bg-white p-4 rounded-2xl flex flex-col gap-4">
      <div class="grid grid-cols-2 gap-2 justify-center items-center">
        <button
          class=""
          [ngClass]="{ 'btn-warning-sm': activeTab === 'uploaded-file' }"
          (click)="onTabSelected('uploaded-file')"
        >
          Uploaded File
        </button>
        <button
          class=""
          [ngClass]="{ 'btn-warning-sm': activeTab === 'transcribed-text' }"
          (click)="onTabSelected('transcribed-text')"
        >
          Transcribed Text
        </button>
      </div>

      @if(activeTab === 'uploaded-file'){
      <img src="img/default-img.png" class="w-full rounded-2xl object-cover" alt="class image" />
      } @if(activeTab === 'transcribed-text'){
      <div class="container mx-auto overflow-x-hidden">
        <div class="flex flex-col gap-4">
          <!-- Main Content Area -->
          <div class="space-y-8">
            <!-- Essay with Corrections -->
            <div class="gradient-card p-2 hover-lift fade-in">
              <div class="flex flex-col mb-6 pb-4 border-b border-gray-200">
                <div>
                  <h2 class="text-lg font-bold text-gray-800">
                    The Impact of Digital Technology on Modern Education
                  </h2>
                  <p class="text-gray-500 mt-1">By: Sarah Johnson • May 15, 2023</p>
                </div>
                <div class="flex space-x-2 mt-2">
                  <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"
                    >Education</span
                  >
                  <span
                    class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"
                    >Technology</span
                  >
                </div>
              </div>

              <!-- Essay Text with Corrections -->
              @if (writingCorrectionsHtml) {
              <pre class="text-sm leading-relaxed text-gray-700 whitespace-pre-wrap font-sans" [innerHTML]="writingCorrectionsHtml"></pre>
              }
            </div>

            <!-- Feedback and Suggestions -->
            <div class="gradient-card hover-lift fade-in">
              <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                <i class="fas fa-comment-dots text-blue-500 mr-3"></i>
                Detailed Feedback & Suggestions
              </h3>

              <div class="grid md:grid-cols-2 gap-6">
                <!-- Areas for Improvement -->
                <div>
                  <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                    <i class="fas fa-tools text-red-500 mr-2"></i>
                    Areas for Improvement
                  </h4>

                  <div class="space-y-4">
                    <div class="suggestion-item border-red-400">
                      <h5 class="font-medium text-gray-800">Relevance and Idea Development</h5>
                      <p class="text-sm text-gray-600 mt-1">
                        Some ideas are not relevant to the main topic. Develop arguments with
                        supporting examples and data.
                      </p>
                    </div>

                    <div class="suggestion-item border-blue-400">
                      <h5 class="font-medium text-gray-800">Structure and Coherence</h5>
                      <p class="text-sm text-gray-600 mt-1">
                        Improve logical flow between paragraphs and ensure each paragraph has a
                        clear topic sentence.
                      </p>
                    </div>

                    <div class="suggestion-item border-green-400">
                      <h5 class="font-medium text-gray-800">Grammar and Spelling</h5>
                      <p class="text-sm text-gray-600 mt-1">
                        Correct basic grammar mistakes and pay attention to spelling of technical
                        terms.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Strengths -->
                <div>
                  <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                    <i class="fas fa-star text-yellow-500 mr-2"></i>
                    Strengths
                  </h4>

                  <div class="space-y-4">
                    <div class="flex items-start">
                      <i class="fas fa-check text-green-500 mt-1 mr-3"></i>
                      <div>
                        <h5 class="font-medium text-gray-800">Relevant Topic</h5>
                        <p class="text-sm text-gray-600 mt-1">
                          Topic selection is appropriate to modern context and important.
                        </p>
                      </div>
                    </div>

                    <div class="flex items-start">
                      <i class="fas fa-check text-green-500 mt-1 mr-3"></i>
                      <div>
                        <h5 class="font-medium text-gray-800">Basic Structure</h5>
                        <p class="text-sm text-gray-600 mt-1">
                          Essay has clear introduction, body, and conclusion structure.
                        </p>
                      </div>
                    </div>

                    <div class="flex items-start">
                      <i class="fas fa-check text-green-500 mt-1 mr-3"></i>
                      <div>
                        <h5 class="font-medium text-gray-800">Awareness of Issues</h5>
                        <p class="text-sm text-gray-600 mt-1">
                          Shows understanding of technology challenges in education.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Action Steps -->
              <div
                class="mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200"
              >
                <h4 class="font-semibold text-gray-700 mb-3 flex items-center">
                  <i class="fas fa-road text-blue-500 mr-2"></i>
                  Action Steps for Improvement
                </h4>
                <ol class="list-decimal list-inside text-gray-700 space-y-2">
                  <li>Focus on the main topic - technology's impact on education</li>
                  <li>Use specific examples and supporting data to strengthen arguments</li>
                  <li>Improve paragraph structure with clear topic sentences</li>
                  <li>Review grammar usage and spelling carefully</li>
                  <li>Develop a stronger conclusion that summarizes key points</li>
                </ol>
              </div>
            </div>
          </div>

          <div class="lg:col-span-1 space-y-6">
            <div class="gradient-card p-6 hover-lift">
              <div class="flex items-center justify-between mb-4">
                <h3 class="font-semibold text-gray-700">Overall Score</h3>
                <span class="text-blue-500 text-xl font-bold">82/100</span>
              </div>

              <div class="relative w-32 h-32 mx-auto mb-4">
                <svg class="progress-ring w-32 h-32" width="120" height="120">
                  <circle
                    class="text-gray-200"
                    stroke-width="10"
                    stroke="currentColor"
                    fill="transparent"
                    r="52"
                    cx="60"
                    cy="60"
                  />
                  <circle
                    class="progress-ring-circle text-blue-500"
                    stroke-width="10"
                    stroke-dasharray="326.56"
                    stroke-dashoffset="58.78"
                    stroke-linecap="round"
                    stroke="currentColor"
                    fill="transparent"
                    r="52"
                    cx="60"
                    cy="60"
                  />
                </svg>
                <div class="absolute inset-0 flex items-center justify-center">
                  <span class="text-2xl font-bold text-gray-700">B+</span>
                </div>
              </div>

              <div class="text-center text-sm text-gray-600">
                <p>Strong effort with some areas for refinement</p>
              </div>
            </div>

            <!-- Correction Stats -->
            <div class="gradient-card p-6 hover-lift">
              <h3 class="font-semibold text-gray-700 mb-4">Correction Statistics</h3>

              <div class="space-y-4">
                <div>
                  <div class="flex justify-between text-sm mb-1">
                    <span class="text-gray-600">Content Issues</span>
                    <span class="font-medium">4</span>
                  </div>
                  <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-red-400 rounded-full" style="width: 36%"></div>
                  </div>
                </div>

                <div>
                  <div class="flex justify-between text-sm mb-1">
                    <span class="text-gray-600">Grammar Issues</span>
                    <span class="font-medium">3</span>
                  </div>
                  <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-green-400 rounded-full" style="width: 27%"></div>
                  </div>
                </div>

                <div>
                  <div class="flex justify-between text-sm mb-1">
                    <span class="text-gray-600">Organization Issues</span>
                    <span class="font-medium">2</span>
                  </div>
                  <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-blue-400 rounded-full" style="width: 18%"></div>
                  </div>
                </div>

                <div>
                  <div class="flex justify-between text-sm mb-1">
                    <span class="text-gray-600">Vocabulary Issues</span>
                    <span class="font-medium">3</span>
                  </div>
                  <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-purple-400 rounded-full" style="width: 27%"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Correction Legend -->
            <div class="gradient-card p-6 hover-lift">
              <h3 class="font-semibold text-gray-700 mb-4">Correction Legend</h3>

              <div class="space-y-3">
                <div class="flex items-center">
                  <span class="correction-badge bg-red-100 text-red-800">REL</span>
                  <span class="text-sm text-gray-600 ml-2">Relevance</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-red-100 text-red-800">DEV</span>
                  <span class="text-sm text-gray-600 ml-2">Idea Development</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-red-100 text-red-800">TA</span>
                  <span class="text-sm text-gray-600 ml-2">Task Achievement</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-blue-100 text-blue-800">COH</span>
                  <span class="text-sm text-gray-600 ml-2">Coherence</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-blue-100 text-blue-800">TS</span>
                  <span class="text-sm text-gray-600 ml-2">Topic Sentence</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-green-100 text-green-800">T</span>
                  <span class="text-sm text-gray-600 ml-2">Tense</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-green-100 text-green-800">AGR</span>
                  <span class="text-sm text-gray-600 ml-2">Agreement</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-purple-100 text-purple-800">WC</span>
                  <span class="text-sm text-gray-600 ml-2">Word Choice</span>
                </div>
                <div class="flex items-center">
                  <span class="correction-badge bg-yellow-100 text-yellow-800">SP</span>
                  <span class="text-sm text-gray-600 ml-2">Spelling</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        // Progress ring animation
        document.addEventListener('DOMContentLoaded', function () {
          const circle = document.querySelector('.progress-ring-circle');
          const radius = circle.r.baseVal.value;
          const circumference = radius * 2 * Math.PI;

          circle.style.strokeDasharray = `${circumference} ${circumference}`;
          circle.style.strokeDashoffset = circumference;

          // Set progress based on score (82%)
          const offset = circumference - (82 / 100) * circumference;
          setTimeout(() => {
            circle.style.strokeDashoffset = offset;
          }, 500);

          // Add fade-in animation to elements
          const fadeElements = document.querySelectorAll('.fade-in');
          fadeElements.forEach((el, index) => {
            el.style.animationDelay = `${index * 0.1}s`;
          });
        });
      </script>
      }
    </div>

    <div class="w-full bg-white p-4 rounded-2xl flex flex-col gap-4">
      <div class="flex flex-row justify-between items-center">
        <p class="text-lg font-bold">AI Feedback</p>
      </div>
      <div class="">
        <div class="flex flex-col gap-3">
          @for (item of feedbacks; track item) {
          <div class="w-full grid grid-cols-7 items-center py-4 px-4 bg-[#F3F3F3] rounded-xl">
            <div class="col-span-6">
              <p class="text-base font-bold">
                {{ item.category }}
              </p>
              <p class="text-sm">
                {{ item.description }}
              </p>
            </div>
            <div class="col-span-1">
              <div
                class="h-8 w-8 mx-auto rounded-full bg-[#008081] flex items-center justify-center"
              >
                <p class="text-xs font-bold text-white">{{ item.score }}/{{ item.maxScore }}</p>
              </div>
            </div>
          </div>
          }
          <div class="flex justify-end">
            <button class="btn-warning-sm w-fit">View / Edit Rubric</button>
          </div>
          <div class="w-full items-center py-4 px-4 bg-[#F3F3F3] rounded-xl">
            <p class="text-base font-bold">Teacher Comments</p>
            <div class="flex flex-col gap-1">
              <div class="w-full">
                <textarea
                  formControlName="message"
                  class="input-text w-full text-sm h-32 resize-none bg-white"
                  placeholder=""
                >
                </textarea>
                <div class="flex justify-end">
                  <button class="btn-primary-sm w-fit">Submit</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  }
</ng-container>
