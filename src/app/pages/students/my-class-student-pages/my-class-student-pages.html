<ng-container>
  @if(device.isDesktop()) {

  <div class="mb-6 flex flex-row justify-between items-center">
    <h1 class="text-4xl text-center font-bold text-gray-800">My Classes</h1>
    <div class="flex flex-row gap-2">
      <div class="relative">
        <input 
          type="text" 
          class="input-text bg-white w-[370px]" 
          placeholder="Search Your Class" 
          (input)="onSearchInput($event)"
          [value]="searchTerm"
          required 
        />
      </div>
      <button type="button" class="btn-warning" (click)="loadClasses()">Refresh</button>
      <button type="submit" class="btn-primary" (click)="onAddClasses()">Join A New Class</button>
    </div>
  </div>

  <div class="grid grid-cols-4 gap-3">
    @if (isLoading) {
    <div class="col-span-4 flex justify-center items-center py-12">
      <div class="flex flex-col items-center gap-4">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-[#136C6D]"></div>
        <p class="text-gray-500">Loading your classes...</p>
      </div>
    </div>
    } @else if (filteredClasses.length === 0 && searchTerm) {
    <div class="col-span-4 flex justify-center items-center py-12">
      <div class="text-center">
        <i class="bx bx-search text-4xl text-gray-300 mb-4"></i>
        <p class="text-gray-500 text-lg">No classes found for "{{ searchTerm }}"</p>
        <p class="text-gray-400 text-sm">Try a different search term</p>
      </div>
    </div>
    } @else if (classes.length === 0) {
    <div class="col-span-4 flex justify-center items-center py-12">
      <div class="text-center">
        <i class="bx bx-book-open text-4xl text-gray-300 mb-4"></i>
        <p class="text-gray-500 text-lg">No classes found</p>
        <p class="text-gray-400 text-sm">Join a class to get started</p>
      </div>
    </div>
    } @else {
    @for (item of filteredClasses; track item.title) {
    <app-my-classes-card-student [id]="item.id" [image]="item.image" [title]="item.title" [students]="item.students"
      [assignments]="item.assignments" [submissions]="item.submissions" [description]="item.description"
      [teacher]="item.teacher" [lastEdited]="item.lastEdited" />
    }
    }
  </div>

  <app-modal-dialog [open]="showDialog">
    <h2 class="text-3xl font-bold text-center mb-8">Join A New Class</h2>
    <app-join-class-form (joined)="onJoined($event)" (closed)="closeDialog()"></app-join-class-form>
  </app-modal-dialog>

  }
</ng-container>

<ng-container>
  @if(device.isTablet() || device.isMobile()){
  <div class="flex flex-col gap-6">
    <div class="flex flex-col gap-2">
      <div class="w-full flex flex-row justify-between items-center">
        <p class="text-2xl font-bold">My Classes</p>
      </div>
      <div class="relative">
        <input 
          type="text" 
          class="input-text bg-white w-full" 
          placeholder="Search Your Class" 
          (input)="onSearchInput($event)"
          [value]="searchTerm"
          required 
        />
      </div>
    </div>
    <div class="w-full flex flex-col gap-2">
    @if (isLoading) {
    <div class="flex justify-center items-center py-12">
      <div class="flex flex-col items-center gap-4">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-[#136C6D]"></div>
        <p class="text-gray-500">Loading your classes...</p>
      </div>
    </div>
    } @else if (filteredClasses.length === 0 && searchTerm) {
    <div class="flex justify-center items-center py-12">
      <div class="text-center">
        <i class="bx bx-search text-4xl text-gray-300 mb-4"></i>
        <p class="text-gray-500 text-lg">No classes found for "{{ searchTerm }}"</p>
        <p class="text-gray-400 text-sm">Try a different search term</p>
      </div>
    </div>
    } @else if (classes.length === 0) {
    <div class="flex justify-center items-center py-12">
      <div class="text-center">
        <i class="bx bx-book-open text-4xl text-gray-300 mb-4"></i>
        <p class="text-gray-500 text-lg">No classes found</p>
        <p class="text-gray-400 text-sm">Join a class to get started</p>
      </div>
    </div>
    } @else {
    @for (item of filteredClasses; track item.title) {
    <app-my-classes-card-student [id]="item.id" [image]="item.image" [title]="item.title" [students]="item.students"
      [assignments]="item.assignments" [submissions]="item.submissions" [description]="item.description"
      [teacher]="item.teacher" [lastEdited]="item.lastEdited" />
    }
    }
    </div>
  </div>
  <button class="fixed bottom-20 right-6 btn-primary-sm" (click)="onOpenSheetAddClasses()">
    Join A New Class
  </button>

  <app-bottomsheet-dialog [open]="openSheet" (closed)="onCloseSheetAddClasses()">
    <h2 class="text-2xl font-bold mb-3">Join A New Class</h2>
    <app-join-class-form (joined)="onJoined($event)" (closed)="onCloseSheetAddClasses()"></app-join-class-form>
  </app-bottomsheet-dialog>
  }
</ng-container>